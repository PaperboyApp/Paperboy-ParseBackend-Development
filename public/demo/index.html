<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paperboy Demo</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="libraries/phone-input/css/intlTelInput.css">
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="js/vendor/modernizr.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="libraries/phone-input/js/intlTelInput.min.js"></script>
  </head>
  <body>
    <div class"row">
      <div class="large-12 columns">
        <img src="img/techcrunch.jpg">
        <a href="#" id="show-overlay" data-reveal-id="myModal"></a>
        <div id="myModal" class="reveal-modal medium get-started" data-reveal>
          <div class="row">
            <div class="large-1 columns"></div>
            <div class="large-10 columns">
              <h2>Get push notifications with TechCrunch top headlines</h2>
            </div>
            <div class="large-1 columns"></div>
          </div>
          <form method="POST" action="/subscribe" id="subscribe-form">
            <label>
              <input type="tel" id="mobile-number">
              <input type="hidden" name="phone">
              <input type="hidden" name="publisher" value="TechCrunch">
              <span id="valid-msg" class="hide">âœ“ Valid</span>
              <span id="error-msg" class="hide">Invalid number</span>
            </label>
            <script>
              var telInput = $("#mobile-number"),
                errorMsg = $("#error-msg"),
                validMsg = $("#valid-msg");

              // initialise plugin
              telInput.intlTelInput({
                utilsScript: "libraries/phone-input/js/libphonenumber/build/utils.js",
                defaultCountry: "auto"
              });

              // on blur: validate
              telInput.blur(function() {
                if ($.trim(telInput.val())) {
                  if (telInput.intlTelInput("isValidNumber")) {
                    validMsg.removeClass("hide");
                  } else {
                    telInput.addClass("error");
                    errorMsg.removeClass("hide");
                    validMsg.addClass("hide");
                  }
                }
              });

              // on keydown: reset
              telInput.keydown(function() {
                telInput.removeClass("error");
                errorMsg.addClass("hide");
                validMsg.addClass("hide");
              });

              function prepareData() {
                var intlNumber = telInput.intlTelInput("getNumber")
                console.log(intlNumber)

                //populate phone hidden field

                // submit form
                document.getElementById('subscribe-form').submit();
              }
            </script>
            <a class="button" onclick="prepareData()" href="#">SUBSCRIBE</a>
          </form>
          <h3>Powered by</h3>
          <img src="img/paperboy_logo.png">
          <a class="close-reveal-modal">&#215;</a>
        </div>
      </div>
    </div>
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
    <script>
      $(document).ready(function() {
        setTimeout(function(){
           $('#show-overlay').click();
        }, 0000);
      });
    </script>
  </body>
</html>
